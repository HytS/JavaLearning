1. 谈下你对 Redis 的了解？
* 全称远程字典服务 remote dictionary server 是一个开源的使用ansi c编写的、支持网络、可基于内存也可持久化的日志型、k-v数据库，并提供多种语言的api
* redis和其他k-v缓存产品相比有一下特点：redis支持数据的持久化，可以将内存的数据保存在磁盘中，重启的时候可以再次加载使用；redis不仅支持k-v类型的数据，也支持set、list、zset、hash等类型的存储；redis支持数据的备份

2. Redis 一般都有哪些使用场景？
* 缓存、排行榜、计数器/限速器、好友关系、消息队列、Session共享
* 不适合的场景：数据量太大、数据访问频率非常低的业务都不适合，数据太大增加成本，访问频率低浪费资源

3. Redis 有哪些常见的功能？
* 数据缓存、分布式锁、支持数据持久化、支持事务、支持消息队列

4. Redis 支持的数据类型有哪些？

5. Redis 为什么这么快？

6. 什么是缓存穿透？怎么解决？

7. 什么是缓存雪崩？该如何解决？

8. 怎么保证缓存和数据库数据的一致性？

9.  Redis 持久化有几种方式？

10. Redis 内存淘汰策略有哪些？

11. Redis 常见性能问题和解决方案？

12. Redis的过期键的删除策略

13. 我们知道通过expire来设置key 的过期时间，那么对过期的数据怎么处理呢?

14. Hash 冲突怎么办？

15. 什么是 RDB 内存快照？

16. 在生成 RDB 期间，Redis 可以同时处理写请求么？

17. 如何实现数据尽可能少丢失又能兼顾性能呢？

18. 哈希槽又是如何映射到 Redis 实例上呢？

19. Redis如何做内存优化？

20. Redis线程模型

21. Redis事务及其相关面试题

22. Redis是单线程的，如何提高多核CPU的利用率？

23. 为什么要做Redis分区？

24. 你知道有哪些Redis分区实现方案？

25. Redis分区有什么缺点？

26. 如何解决 Redis 的并发竞争 Key 问题

27. 分布式Redis是前期做还是后期规模上来了再做好？为什么？

28. Redis相比Memcached有哪些优势？

29. 为什么要用 Redis 而不用 map/guava 做缓存?

30. 如何选择合适的持久化方式

31. Redis key的过期时间和永久有效分别怎么设置？

32. 双写一致性方案一：先删除缓存，后更新数据库

33. 双写一致性方案二：先更新数据库，后删除缓存

34. 什么是缓存预热?

35. 什么是缓存降级？

36. Redis真的是单线程？

37. Redis 6.0为何引入多线程？

38. Redis 6.0 多线程的实现机制？

39. Redis 6.0 采用多线程后，性能的提升效果如何？

40. Redis 6.0开启多线程后，是否会存在线程并发安全问题？

41. Redis 6.0 与 Memcached 多线程模型的对比

42. 介绍下Redis单副本

43. 介绍下Redis多副本（主从）

44. 介绍下Redis Sentinel（哨兵）

45. 介绍下Redis Cluster

46. 介绍下Redis自研

47. Redis高可用方案具体怎么实施？

48. 了解主从复制的原理吗？

49. 由于主从延迟导致读取到过期数据怎么处理？

50. 主从复制的过程中如果因为网络原因停止复制了会怎么样？

51. Redis主从架构数据会丢失吗，为什么？

52. 如何解决主从架构数据丢失的问题？

54. Redis哨兵是怎么工作的？

55. 故障转移时会从剩下的slave选举一个新的master，被选举为master的标准是什么？

56. 同步配置的时候其他哨兵根据什么更新自己的配置呢？

57. 为什么Redis哨兵集群只有2个节点无法正常工作？

58. Redis cluster中是如何实现数据分布的？这种方式有什么优点？

59. Redis cluster节点间通信是什么机制？

60. 什么是分布式锁？为什么用分布式锁？

61. 常见的分布式锁有哪些解决方案？

62. Redis实现分布式锁

63. RedLock的原理


# redis常见面试题
## redis基础
### 什么是redis
redis是一个基于c语言开发的开源数据库，与传统数据库不同的是redis的数据是存在内存中的，读写速度非常快，被广泛用于缓存方向。并且，redis存储的是kv键值对数据

### redis为什么那么快
内部做了许多的性能优化
1.redis基于内存，内存的访问速度是磁盘的上千倍
2.redis基于Reactor模式设计开发了一套高效的事件处理模型，主要是单线程事件循环和io多路复用
3.redis内置了多种优化后的数据结构实现，性能非常高
![图片](https://javaguide.cn/assets/why-redis-so-fast-d3507ae8.png)


### 分布式缓存常见的技术选型方案有哪些
分布式缓存用的比较多的是memcached和redis。大部分都是使用redis做缓存

### redis和memcached的区别和共同点
共同点：
1.都是基于内存的数据库，一般都当作缓存使用
2.都有过期策略
3.两者的性能都非常高

区别：
1.redis支持更复杂的应用场景。redis不仅仅支持简单的kv类型的数据，同时还提供list、set、zset、hash等数据结构存储。memcached只支持最简单的kv数据类型
2.redis支持数据的持久化，可以将内存中的数据保持在磁盘中，重启的时候可以再次加载进行使用，而memcached把数据全部存在内存中
3.redis有灾难恢复机制。因为可以把缓存中的数据持久化到磁盘上
4.redis在服务器内存使用完之后，可以将不用的数据放到磁盘上。但是，memcached在服务器内存使用完成后，会报异常
5.memcached没有原生的集群模式，需要依赖客户端来实现往集群中分片写入数据；redis目前原生支持cluster模式的
5.memcached没有原生的集群模式，需要依赖客户端来实现往集群中分片写入数据；redis目前原生支持cluster模式的
6.memcacahed是多线程，非阻塞io复用的网络模型；redis使用单线程的多路io复用的网络模型（redis6.0针对网络数据的写入引入了多线程）
7.redis支持发布订阅模型、lua脚本、事务等功能，memcached不支持
8.memcached过期数据的删除策略只用了惰性删除，redis同时使用了惰性删除和定期删除

### 为什么要用redis/为什么要用缓存
1、高性能
假如用户第一次访问数据库的某些数据，这个过程很慢，因为是从硬盘中读取，如果说，用户访问的数据是高频数据且不会经常改变，那么我们可以将数据放入缓存中。这样可以保证用户下一次再访问这些数据可以直接从缓存中获取
2、高并发
一般像mysql这类数据库的qps一般在1w左右，但是使用redis缓存轻易就能到10w+
qps：服务器每秒可以执行的查询次数

直接操作缓存能够承受的数据库的请求数量是远远大于直接访问数据库的，所以我们考虑把数据库中的部分数据转移到缓存中去，这样用户的一部分请求就会直接到缓存而不用经过数据库，进而提高了系统整体的并发

## redis应用
### redis除了做缓存还能做什么
* 分布式锁：通过redis来做分布式锁是一种比较常见的方式，通常情况下，都是基于redission来实现分布式锁。
* 限流：一般通过redis+lua脚本实现限流
* 消息队列：redis自带的list数据结构可以作为一个简单的队列使用。redis5.0中增加的stream类型的数据结构更适合用来做消息队列。它比较类似kafka，有主题和消费组的概念，支持消息持久化和ack机制
* 延时队列：redission内置了延时队列
* 分布式Session：利用string或hash保存Sessin数据，所有的服务器都可以访问
* 复杂业务场景：通过redis以及redis扩展提供的数据结构，可以很方便的完成很多复杂的业务场景
